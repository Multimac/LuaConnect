///////////////////////////////////////////////////////////////////////////////////////////////////
/// LuaConnect/Helpers/Balance.cpp
///////////////////////////////////////////////////////////////////////////////////////////////////
#include "LuaConnect\Helpers\Balance.h"

///////////////////////////////////////////////////////////////////////////////////////////////////
/// Preprocessor
///////////////////////////////////////////////////////////////////////////////////////////////////
#include "LuaConnect\Helpers\Headers.h"
#include "LuaConnect\Helpers\State.h"

#include <assert.h>

namespace LuaConnect
{
    ///////////////////////////////////////////////////////////////////////////////////////////////
    /// Balance - Public Members
    ///////////////////////////////////////////////////////////////////////////////////////////////
    Balance::Balance(std::shared_ptr<State> state, int delta) :
        m_state(state), m_initial(lua_gettop(m_state->state)), m_delta(delta)
    { }
    Balance::~Balance()
    {
        // Check the stack has been balanced as we were told it would be
        int top = lua_gettop(m_state->state);
        assert(top == m_initial + m_delta);
    }
}